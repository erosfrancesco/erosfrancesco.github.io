<head>
  	<title> Engine Headers </title>
</head>

<body>

    <style>
    
    #parent {
        display: table;
        margin: auto auto;
    }
  
    </style>
    <div id="parent"></div>

    <script src='../engine/phaser.min.js'></script>    
	<script src='../engine/colors.js'></script>
    <script src='../engine/input.js'></script>

    <script>

        class PreloadScene extends Phaser.Scene {

            constructor (config) {
                super(config);
                console.log('Preload scene built.');
            }

            preload () {
                this.load.spritesheet('FFVICast', '../assets/ffviCast.png', { frameWidth: 680 / 4, frameHeight: 756 / 4 });
            }

            create () {

                this.input = new KeyInputMapper({scene: this, debounce: 8});
                this.input.mapKey( Phaser.Input.Keyboard.KeyCodes.A, key => { console.log('selected'); });
                this.input.mapKey( Phaser.Input.Keyboard.KeyCodes.S, key => { console.log('selected'); });
                //this.input.removeKey(Phaser.Input.Keyboard.KeyCodes.S);


                // center origin
                let TerraSpriteConfig = {
                    key: 'FFVICast',
                    originX: 0.5,
                    originY: 0.5,
                    x: 0,
                    y: 0,
                    //scale: { randFloat: [ 0.2, 2 ] }
                };

                this.sprite = this.make.sprite(TerraSpriteConfig);
                this.sprite.x = 200;
                this.sprite.y = 200;


                this.sprite.setTint(window.colors.stringTo0x( window.colors.lime ));

                /*
                
                this.keyA = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.A);

                let combo = this.input.keyboard.createCombo('phaser', { maxKeyDelay: 3000 });

                this.input.keyboard.on('keycombomatch', function (event) {
                    console.log('You typed phaser quickly!');
                });

                this.input.keyboard.on('keydown_B', function (event) {
                    console.log('hello a!');
                });
                /**/

            }

            update() {
                //if (Phaser.Input.Keyboard.JustDown(this.keyA)) console.log('Pooling a');
            
                this.input.update();
            }
        }

        
    </script>

    <script>

        let width = 900;
        let height = 500;

        let GAME = new Phaser.Game({
            width,
            height,
            pixelArt: true,
            parent: 'parent'
        });

        GAME.scene.add('Preload', PreloadScene, true);

    </script>
</body>
